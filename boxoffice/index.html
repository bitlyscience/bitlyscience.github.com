<html>

<head>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script 
    type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
    >
</script>

<link href="/static/css/bootstrap.css" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
</head>

<body>
<div id="content">

<div class="science_title">  
<h1>Bitly Boxoffice</h1>
</div>

<p> 
<big> Predicting opening weekend film gross with bitly data. </big>
<br><br><br>
This project aims to predict the opening weekend gross of movies using features derived from bitly data. The following graph shows a timeseries containing the saved-links-per-hour for Men in Black 3 links, around its release on May 25, 2012.
<br><br>
<img src= '/boxoffice/img/writeup_fig1_MIB_small.png' width="1000";>
<br><br><br><br>
As attention towards a movie grows, so does the number of saved links with content related to the movie. The following graph shows the timeseries of saved-links-per-hour for a few summer blockbusters.
<br><br>
<img src= '/boxoffice/img/writeup_fig2_small.png' width="1000";>
<br><br><br><br>
<big><b>Features for supervised learning:</b></big>
<br><br>
We would like to derive features from the timeseries signal for use in supervised learning. The following are a collection of features that we can compute from this signal or from prior information about a movie:
<br><br>
<b>Total Saves:</b> the sum of the saves that make up the timeseries in a window prior to the release.<br><br>
<b>Peak Saves:</b> the sum of the saves that make up the timeseries in a window prior to the release.<br><br>
<b>First Fourier Coefficient:</b> the first coefficient of the fourier transform of the timeseries.<br><br>
<b>Timeseries Slope:</b> the slope of the line formed by the two endpoints of the timeseries over a window prior to the release.<br><br>
<b>Theater Count:</b> the number of theaters where a movie plays. <br>
<img src= '/boxoffice/img/writeup_fig3_rScatter_noAvengers_border_small.png' width="700";>
<br><br><br><br>
We must select a window of time over which we will derive features from the timeseries. We would like this window to end long enough prior to the release to make and/or publish predictions about the opening weekend gross; it is unclear how long before the release the window should start.
<br><br>
<img src= '/boxoffice/img/writeup_fig4_tsWindowFig_small.png
' width="1000";>
<br><br><br><br>
The following plots show a single feature plotted against weekend movie gross for a range of timeseries windows. The plot areas are shaded by the r-squared coefficient of determination of the plotted points.
<br><br><br>
<img src= '/boxoffice/img/writeup_fig5_rSqu_scatter_fourier_small.png' width="450";>
<img src= '/boxoffice/img/writeup_fig5_rSqu_scatter_totalSaves_small.png' width="450";>
<br><br><br><br>
We also define a distance between timeseries to employ the $k$-nearest-neighbor algorithm. We incorporate the results of this algorithm as an additional feature. The distance between two timeseries, $ts_{1}$ and $ts_{2}$, is defined to be: <br><br>
$D(ts_{1},ts_{2}) = \sum_{i} \frac{ ts_{1}(i) - ts_{2}(i) } { \text{max}(\sum ts_{1}, \sum ts_{2}) } $ <br><br>
where $i$ ranges over each time-point in the timeseries window, $ts(i)$ denotes the timeseries value at time $i$, and $\sum ts$ denotes the sum over all values in the timeseries.
<br><br>
To incorporate the results of $k$-nearest-neighbors as a feature, we take the inverse-distance weighted average of the opening weekend gross for each of the $k$ neighbors.
<br><br>
<img src= '/boxoffice/img/writeup_fig6_nnFig_01.png' height="350";>
<img src= '/boxoffice/img/writeup_fig6_nnFig_02.png' height="350";>
<br><br>
<img src= '/boxoffice/img/writeup_fig6_nnFig_03.png' height="350";>
<img src= '/boxoffice/img/writeup_fig6_nnFig_04.png' height="350";>
<br><br><br><br>
<big><b>Model:</b></big>
<br><br>
We choose a linear model for prediction, and perform k-fold cross-validation on all combinations of features for feature subset selection. The resulting model has the form:
<br><br>
$y = c_{1}x_{1} + c_{2}x_{2} + c_{3}x_{3} + c_{4}x_{4} + c_{5}x_{5}$
<br><br>
where $x_{1}$ is the first fourier coefficient, $x_{2}$ is the timeseries slope, $x_{3}$ is the total number of saves, $x_{4}$ is the weighted nearest neighbor average, and $x_{5}$ is the theater count.
<br><br><br><br>
<big><b>Predictions:</b></big>
<br><br>
We've trained our model and used it to predict the opening weekend gross for a test set of five recent movies:<br> Seeking a Friend for the End of the World, Abraham Lincoln: Vampire Hunter, Magic Mike, Madea's Witness Protection, and People Like Us.
<br><br>
The Hollywood Stock Exchange (HSE) is a web-based game and prediction market where visitors buy and sell virtual shares of celebrities and movies. The HSX uses the values of shares to make predictions of movie openings.
<br><br>
<img src= '/boxoffice/img/writeup_fig7_resultsb.png' height="300";>

<!--<table border='1' cellpadding='2'>-->
    <!--<tr>-->
        <!--<td>Movie  </td>-->
        <!--<td>Predicted Opening Weekend Gross</td>-->
        <!--<td>True Opening Weekend Gross</td>-->
    <!--</tr>-->
    <!--<tr>-->
        <!--<td>Movie1  </td>-->
        <!--<td>34M</td>-->
        <!--<td>36M</td>-->
    <!--</tr>-->
<!--</table>-->


</p>

</div>
</body>
</html>
